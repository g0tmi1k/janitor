{% extends "layout.html" %}
{% from "codeblock.html" import include_console_log with context %}
{% block page_title %}Contact{% endblock %}
{% block body %}
<div class="section" id="{{ run_id }}">
<h1>Run of {{ kind }} for {{ package }}</h1>

<ul class="simple">
<li>Package: <a class="reference external" href="..">{{ package }}</a></li>
<li>Start time: {{ start_time}}</li>
<li>Finish time: {{ finish_time }}</li>
<li>Duration: {{ format_duration(finish_time - start_time) }}</li>
<li>Description: {{ description }}</li>
</ul>

<p>Try this locally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre>debian-svp {{ command }} {{ package }} </pre></div></div>

{% if vcs == 'git' and branch_name %}

<!-- TODO(jelmer): Include button to propose merging -->
<!-- TODO(jelmer): Include button to retry -->

<p>Merge these changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre>git pull {{ cache_url_git }}{{ package }} {{ branch_name }}</pre></div></div>
{% elif vcs == 'bzr' and branch_name %}
<p>Merge these changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre>brz merge {{ cache_url_bzr }}{{ package }}/{{ branch_name }}</pre></div></div>
{% else %}
{% if build_log_path %}
{{ include_console_log(build_log_path, build_log_include_lines or (max(1, build_log_line_count), None), build_log_highlight_lines) }}
{% elif worker_log_path %}
{{ include_console_log(worker_log_path) }}
{% else %}
<!-- No logs to display :( -->
{% endif %}
{% endif %}

{% if changes_name %}
<h2>Built Package</h2>
<p>Changes filename: <a class="reference external" href="../../../{{ build_distro }}/{{ changes_name }}">{{ changes_name }}</a></p>

{% if binary_packages %}
<p>Install this package (if you have the <a class="reference external" href="../../../">apt repository</a> enabled) by running one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre>
{% for binary_package in binary_packages %}
apt install -t {{ build_distro }} {{ binary_package }}
{% endfor %}
</pre></div></div>
{% endif %}
{% endif %}

<p>{% if build_log_path %}<a class="reference external" href="{{ build_log_name }}">Full build log</a>{% for i, name in earlier_build_log_names %}<a href="{{ name }}">{{ i }}</a>{% endfor %} {% endif %}{% if worker_log_name %}<a class="reference external" href="{{ worker_log_name }}">Full worker log</a>{% endif %}</p>

</div>
{% endblock %}
