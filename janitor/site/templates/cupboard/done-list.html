{% extends "layout.html" %}
{% block sidebar %}
    {% include "cupboard/sidebar.html" %}
{% endblock sidebar %}
{% block page_title %}
    Changes that have been merged or pushed
{% endblock page_title %}
{% block body %}
    <div class="section" id="history">
        <h1>Changes to have been merged or pushed</h1>

	<form method="get" action="/{{ campaign }}/done">
	<label for="start">Start date:</label>

	<input type="date" id="since" name="since"
	       {% if since %}
	       value="{{ since.date().isoformat() }}"
	       {% elif oldest %}
	       value="{{ oldest.date().isoformat() }}"
	       {% endif %}
	       {% if oldest %}
	       min="{{ oldest.date().isoformat() }}"
	       {% endif %}
	       max="{{ utcnow().date().isoformat() }}"/>
	</form>

        <ul>
            {% for run in runs %}
                <li>
                    <a href="pkg/{{ run.package }}/{{ run.id }}">{{ run.package }}</a>
		    {% if run.merged_by %}
		    (merged by {{ run.merged_by }})
		    {% endif %}
                    {% set command = run.command -%}
                    {% set result = run.result -%}
                    {% include [run.suite + "/summary.html", "generic/summary.html"] %}
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock body %}
